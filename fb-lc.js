(function(){const showLicenseMessage=(message)=>{document.body.setAttribute("data-license","blocked");document.body.setAttribute("data-message",message);document.body.innerHTML='<div id="license-message" style="padding:3rem;text-align:center;color:red;font-size:18px;background:#fff">'+message+"</div>"};const blockLicense=()=>{document.body.setAttribute("data-license","blocked")};const markLicenseValid=()=>{window.__LICENSE_VERIFIED__=!0;document.body.setAttribute("data-license","ok");document.documentElement.setAttribute("data-license-verified","true");document.body.removeAttribute("data-message");const el=document.getElementById("license-check");if(el){el.textContent="__LICENSE_VERIFIED__"}};const verifyLicense=()=>{blockLicense();const el=document.querySelector(".idtema .widget-content");const code=el?el.textContent.trim():"";const domain=location.hostname;if(!code||code.length<5){showLicenseMessage("Konten tidak tersedia.");return}
const key="license_"+domain;const cache=JSON.parse(localStorage.getItem(key)||"{}");const now=Date.now();if(cache.code===code&&cache.status==="VALID"&&now-cache.timestamp<86400000){markLicenseValid();return}
const url="https://script.google.com/macros/s/AKfycbw_Urr-iGnIvQfTtJp7-gMdgXd_UKUiPIKWXA2dlLumhzTWiRRYAQnkvTCGzgbsd0Y0/exec"+"?license="+encodeURIComponent(code)+"&domain="+encodeURIComponent(domain);fetch(url).then((r)=>r.text()).then((res)=>{if(res==="VALID"){localStorage.setItem(key,JSON.stringify({code:code,status:"VALID",timestamp:now,}));markLicenseValid()}else{showLicenseMessage("Konten tidak tersedia.")}}).catch(()=>{showLicenseMessage("Gagal memuat data. Periksa koneksi Anda.")})};if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",verifyLicense)}else{verifyLicense()}})()
